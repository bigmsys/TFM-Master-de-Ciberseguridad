# Ubicación: /etc/mosquitto/conf.d/auth.conf

# Carga del plugin mosquitto-go-auth y backend HTTP
auth_plugin /etc/mosquitto/go-auth/go-auth.so
auth_opt_backends http
allow_anonymous false

# Configuración HTTP necesaria
auth_opt_http_host 192.168.122.99
auth_opt_http_port 3000
auth_opt_http_response_mode json
auth_opt_http_params_mode   json
auth_opt_http_method        POST
auth_opt_http_getuser_uri   /auth/user
auth_opt_http_superuser_uri /auth/superuser
auth_opt_http_aclcheck_uri  /auth/acl

# Timeouts y reintentos de conexión
auth_opt_http_timeout 15
auth_opt_http_retry_count 3

# Configuración de caché
auth_opt_cache false
#auth_opt_cache_expiration 300

# Logs detallados
auth_opt_log_level debug
auth_opt_log_dest stdout
#auth_opt_log_file /var/log/mosquitto/go-auth.log

# Opciones adicionales
#auth_opt_http_retry_delay 2
#auth_opt_http_headers Content-Type=application/json
